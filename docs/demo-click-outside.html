<!DOCTYPE html>
<html>
<head>
	<title>vue-outside-events v-click-outside</title>

	<link href="style.css" type="text/css" rel="stylesheet" />
	<link href="theme.css" type="text/css" rel="stylesheet" />
	<script src="syntaxhighlighter.js"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js" type="text/javascript"></script>
	<script src="../dist/vue-outside-events.min.js" type="text/javascript"></script>
</head>
<body>
	<div id="app">
    <div @click="resetHighlights">
      <h2>v-click-outside</h2>

      <p>Start clicking... you'll figure it out.</p>

      <button @click="resetHighlights">Reset</button>

      <div id="test" v-click-outside="onClickOutside">
        test <span class="event-target"></span>

        <div id="a" v-click-outside="onClickOutside">
          a <span class="event-target"></span>
          <div id="b" v-click-outside="onClickOutside">
            b <span class="event-target"></span>
          </div>
        </div>

        <div id="c" v-click-outside="onClickOutside">
          c <span class="event-target"></span>
          <span id="d" class="bind-me" v-click-outside="onClickOutside">d <span class="event-target"></span> </span>
          <span id="e" class="bind-me" v-click-outside="onClickOutside">e <span class="event-target"></span> </span>
        </div>

        <div id="f" v-click-outside="onClickOutside">
          f <span class="event-target"></span>
          <div id="g" v-click-outside="onClickOutside">
            g <span class="event-target"></span>
            <span id="h" class="bind-me" v-click-outside="onClickOutside">h <span class="event-target"></span> </span>
            <span id="i" class="bind-me" v-click-outside="onClickOutside">i <span class="event-target"></span> </span>
          </div>
        </div>
      </div>
    </div>
	</div>
	<script>
    const { createApp, ref } = Vue
    const app = createApp({
      name: 'App',
      methods: {
        resetHighlights() {
          document.querySelectorAll('#test, #test div, #test .bind-me').forEach((i) => {
            i.classList.remove('event-outside')
            i.querySelector('.event-target').textContent = ''
          })
        },
        onClickOutside(e, elem) {
          const { target } = e
          const text = `Clicked: ${target.tagName.toLowerCase()+ ( target.getAttribute('id') ? '#' + target.getAttribute('id') : target.getAttribute('class') ? '.' + target.getAttribute('class').replace( / /g, '.' ) : ' ' )}`;

          elem.classList.add('event-outside')
          elem.querySelector('.event-target').textContent = text;
        }
      }
    });
    app.use(window['vue3-outside-events'])
    app.mount('#app');
	</script>

	<h3 style="border-bottom: 2px solid black;">v-click-outside example</h3>
	<pre class="brush: javascript,xml; html-script: true">
		<template>
			<div v-click-outside="onClickOutside"></div>
		</template>

		&lt;script&gt;
			export default {
				methods: {
					onClickOutside(e, el) {
						console.log("onClickOutside");
						console.log("Event:", e);
						console.log("Element clicked on:", e.target);
						console.log("Element clicked outside of:", el);
					}
				}
			}
		&lt;/script&gt;
	</pre>
</body>
</html>

